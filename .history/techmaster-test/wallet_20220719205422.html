<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.0-beta1 -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="./wallet.css" />
    <link rel="stylesheet" href="./nav-bar.css" />
  </head>
  <body>
    <div class="container-lg">
      <nav class="navbar navbar-expand-md top-md-navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="./homepage.html">
            <div class="d-flex align-items-center attlas-logo-navbar">
              <img src="./img/header-logo.png" class="img-fluid" alt="" />
              <p>Attlas</p>
            </div>
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <i class="fas fa-bars"></i>
          </button>

          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div
              class="d-flex justify-content-between align-items-center nav-text"
            >
              <ul class="navbar-nav navbar-part1">
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    id="navbarDropdown"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    Giao dịch
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">Spot</a></li>
                    <li>
                      <a class="dropdown-item" href="#">Ký quỹ</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">P2P trading</a>
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Thị trường</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Phái sinh</a>
                </li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    id="navbarDropdown"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    Earn
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">Launchpad</a></li>
                    <li>
                      <a class="dropdown-item" href="#">Staking</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Farming</a>
                    </li>
                  </ul>
                </li>
              </ul>

              <ul class="navbar-nav navbar-part2">
                <li class="nav-item d-flex align-items-center">
                  <a class="nav-link account-wallet" href="./wallet.html"
                    >Wallet</a
                  >
                </li>
                <li class="nav-item d-flex align-items-center">
                  <a class="nav-link" href="#"><i class="fas fa-bell"></i></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">
                    <div class="d-flex align-items-center user-account">
                      <p>Jen Glover</p>
                      <img
                        src="./img/Rectangle 356.png"
                        class="img-fluid"
                        alt=""
                      />
                    </div>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <p class="title">WALLET</p>

      <div class="row general-wallet-information">
        <div class="col-lg-6 d-flex flex-column justify-content-between">
          <div class="row">
            <div class="col-lg-6 d-flex justify-content-center">
              <div class="part1">
                <p>Số dư tài khoản</p>
                <p>~4,254 USDT</p>
              </div>
            </div>
            <div class="col-lg-6 d-flex justify-content-center">
              <div class="part1">
                <p>Số USDT khả dụng</p>
                <p>500 USDT</p>
              </div>
            </div>
          </div>
          <div
            class="col-lg-12 d-flex flex-column justify-content-center align-items-center part2"
          >
            <p>PNL analysis (24h)</p>
            <p>~125 USDT</p>
            <p class="decrease">- 3.85%</p>
          </div>
        </div>

        <div class="col-lg-6">
          <div
            class="div-chart d-flex justify-content-center align-items-center"
          >
            <div id="pie-chart"></div>
          </div>
        </div>
      </div>

      <div class="detail-information-wallet">
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="portfolio-tab"
              data-bs-toggle="pill"
              data-bs-target="#list-of-assets"
              type="button"
              role="tab"
              aria-controls="list-of-assets"
              aria-selected="true"
            >
              Danh mục đầu tư
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="history-tab"
              data-bs-toggle="pill"
              data-bs-target="#transaction-history"
              type="button"
              role="tab"
              aria-controls="transaction-history"
              aria-selected="false"
            >
              Lịch sử giao dịch
            </button>
          </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
          <div
            class="tab-pane fade"
            id="list-of-assets"
            role="tabpanel"
            aria-labelledby="portfolio-tab"
            tabindex="0"
          >
            <table id="table" class="table align-middle portfolio-table">
              <thead class="head-portfolio">
                <tr>
                  <th scope="col">Tài sản</th>
                  <th scope="col">Số lượng</th>
                  <th scope="col">Giá vốn trung bình</th>
                  <th scope="col">Giá BID</th>
                  <th scope="col">Lãi/ lỗ (USDT)</th>
                  <th scope="col">Lãi/ lỗ (%)</th>
                </tr>
              </thead>
              <tbody class="body-portfolio"></tbody>
            </table>
          </div>
          <div
            class="tab-pane fade show active"
            id="transaction-history"
            role="tabpanel"
            aria-labelledby="history-tab"
            tabindex="0"
          >
            <div
              class="history-part1 d-flex justify-content-between align-items-start"
            >
              <ul class="nav nav-pills" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="buy-sell-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#buy-sell-transaction"
                    type="button"
                    role="tab"
                    aria-controls="buy-sell-transaction"
                    aria-selected="true"
                    onmousedown="filterAppear(event)"
                  >
                    Giao dịch mua bán
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="onchain-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#on-chain-transaction"
                    type="button"
                    role="tab"
                    aria-controls="on-chain-transaction"
                    aria-selected="false"
                    onmousedown="filterAppear(event)"
                  >
                    Giao dịch on-chain
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="filter-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#filter"
                    type="button"
                    role="tab"
                    aria-controls="filter"
                    aria-selected="false"
                    onmousedown="filterDisappear(event)"
                  >
                    Bộ lọc
                  </button>
                </li>
              </ul>

              <div
                class="d-flex justify-content-start align-items-center filter-bar"
              >
                <div
                  class="d-flex justify-content-between align-items-center time-filter"
                >
                  <input type="date" id="time-filter" />
                  <img
                    src="./img/arrow-right.png"
                    class="img-fluid arrow-picture"
                    alt=""
                  />
                  <input type="date" id="time-filter" />
                </div>

                <select class="form-select coin-filter">
                  <option selected>-All-</option>
                </select>

                <button class="filter-button">Lọc</button>
              </div>
            </div>

            <div class="tab-content" id="pills-tabContent">
              <div
                class="tab-pane fade show active"
                id="buy-sell-transaction"
                role="tabpanel"
                aria-labelledby="buy-sell-tab"
                tabindex="0"
              >
                <table
                  id="table"
                  class="table align-middle buy-sell-transaction-table"
                >
                  <thead class="head-transaction">
                    <tr>
                      <th scope="col">Mã giao dịch</th>
                      <th scope="col">Thời gian</th>
                      <th scope="col">Giao dịch</th>
                      <th scope="col">Cặp giao dịch</th>
                      <th scope="col">Giá khớp lệnh</th>
                      <th scope="col">Phí giao dịch</th>
                      <th scope="col">Số lượng token</th>
                      <th scope="col">Số lượng USDT</th>
                    </tr>
                  </thead>
                  <tbody class="body-transaction"></tbody>
                </table>
              </div>
              <div
                class="tab-pane fade"
                id="on-chain-transaction"
                role="tabpanel"
                aria-labelledby="onchain-tab"
                tabindex="0"
              ></div>
              <div
                class="tab-pane fade"
                id="filter"
                role="tabpanel"
                aria-labelledby="filter-tab"
                tabindex="0"
              >
                <div class="d-flex justify-content-start transaction-filter">
                  <div>
                    <p>Thời gian</p>
                    <div
                      class="d-flex justify-content-between align-items-center time-filter"
                    >
                      <input type="date" id="time-filter" />
                      <img
                        src="./img/arrow-right.png"
                        class="img-fluid arrow-picture"
                        alt=""
                      />
                      <input type="date" id="time-filter" />
                    </div>
                  </div>

                  <div>
                    <p>Coin</p>
                    <select
                      class="form-select coin-filter"
                      id="coin-information"
                    >
                      <option selected>-All-</option>
                    </select>
                  </div>

                  <div>
                    <p>Mã chuyển tiền TXiD</p>
                    <input
                      type="text"
                      class="form-control"
                      id="HASH"
                      placeholder="Nhập TxID"
                    />
                  </div>

                  <div class="d-flex align-items-end">
                    <button class="filter-button">Lọc</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap JavaScript Libraries -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
      integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
      integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <script src="./file-data.js"></script>

    <script>
      var valuesForChart = [];

      function parseValues() {
        for (i = 0; i < Object.values(yourAssets).length; i++) {
          valuesForChart.push(parseInt(Object.values(yourAssets)[i]));
        }
        return valuesForChart;
      }
      parseValues();

      var options = {
        chart: {
          type: "pie",
          width: "400",
        },
        series: valuesForChart,
        labels: Object.keys(yourAssets),
        colors: [
          "#181b62",
          "#23268a",
          "#2d32b3",
          "#4348d0",
          "#6c70da",
          "#878ae1",
        ],
        legend: {
          height: 150,
          position: "right",
        },
        stroke: {
          width: 0.5,
        },
        tooltip: {
          custom: function ({ series, seriesIndex, dataPointIndex, w }) {
            return (
              w.globals.labels[seriesIndex] +
              " : " +
              series[seriesIndex] +
              " USDT "
            );
          },
        },
        dataLabels: {
          enabled: true,
          style: {
            fontSize: "10px",
          },
        },
        responsive: [
          {
            breakpoint: 1400,
            options: {
              chart: {
                width: "350",
              },
            },
          },
          {
            breakpoint: 1200,
            options: {
              chart: {
                width: "330",
              },
            },
          },
        ],
      };
      var chart = new ApexCharts(document.querySelector("#pie-chart"), options);

      chart.render();
    </script>

    <script>
      var investmentPortfolio = document.querySelector(".body-portfolio");

      function inToPortfolio(data) {
        for (var i = 0; i < data.length; i++) {
          var portfolio = data[i];
          let row = document.createElement("tr");
          let key = [
            "asset",
            "quantity",
            "averageCost",
            "bidPrice",
            "pnlUSDT",
            "pnl",
          ];

          for (var j = 0; j < key.length; j++) {
            let cell = document.createElement("td");
            cell.innerHTML = portfolio[key[j]];
            row.appendChild(cell);
          }

          investmentPortfolio.appendChild(row);
        }
      }

      inToPortfolio(AssetsOfAccount);

      var quantity = document.querySelectorAll(
        ".body-portfolio tr td:nth-child(2)"
      );
      var averageCost = document.querySelectorAll(
        ".body-portfolio tr td:nth-child(3)"
      );
      var bidPrice = document.querySelectorAll(
        ".body-portfolio tr td:nth-child(4)"
      );
      var pnlUSDT = document.querySelectorAll(
        ".body-portfolio tr td:nth-child(5)"
      );
      var pnl = document.querySelectorAll(".body-portfolio tr td:nth-child(6)");

      function innerUSDT() {
        for (i = 0; i <= quantity.length; i++) {
          quantity[i].textContent =
            parseFloat(AssetsOfAccount[i].quantity).toLocaleString("en-US", {
              maximumFractionDigits: "5",
            }) +
            " " +
            AssetsOfAccount[i].name;
          averageCost[i].textContent =
            parseFloat(AssetsOfAccount[i].averageCost).toLocaleString("en-US", {
              maximumFractionDigits: "5",
            }) + " USDT";
          bidPrice[i].textContent =
            parseFloat(AssetsOfAccount[i].bidPrice).toLocaleString("en-US", {
              maximumFractionDigits: "5",
            }) + " USDT";
          pnlUSDT[i].textContent =
            parseFloat(AssetsOfAccount[i].pnlUSDT).toLocaleString("en-US", {
              maximumFractionDigits: "5",
            }) + " USDT";

          if (AssetsOfAccount[i].pnlUSDT > 0) {
            pnlUSDT[i].setAttribute("class", "increase");
            pnl[i].setAttribute("class", "increase");
          } else {
            pnlUSDT[i].setAttribute("class", "decrease");
            pnl[i].setAttribute("class", "decrease");
          }
        }
      }

      innerUSDT();
    </script>

    <script>
      var select = document.querySelector(".coin-filter");
      var coinInformation = document.getElementById("coin-information");

      function inToSelect(data) {
        for (var i = 0; i < data.length; i++) {
          var name = data[i];
          var option1 = document.createElement("option");
          option1.innerHTML = name.name;
          select.appendChild(option1);

          var option2 = document.createElement("option");
          option2.innerHTML = name.name;
          coinInformation.appendChild(option2);
        }
      }

      inToSelect(informationTokenHomePage);
    </script>

    <script>
      var pushElememt = {
        time: "",
        transaction: "Mua",
        tradingPair: "",
        name: "",
        orderPrice: "",
        fee: "",
        quantityOfToken: "",
        quantityOfUSDT: "",
      };

      var transactionTable = document.querySelector(".body-transaction");

      function inToTransactionTable(data) {
        for (var i = 0; i < data.length; i++) {
          var historyTable = data[i];
          let row = document.createElement("tr");

          let firstBox = document.createElement("td");
          firstBox.innerHTML = code[i];
          row.appendChild(firstBox);

          let key = [
            "time",
            "transaction",
            "tradingPair",
            "orderPrice",
            "fee",
            "quantityOfToken",
            "quantityOfUSDT",
          ];

          for (var j = 0; j < key.length; j++) {
            let cell = document.createElement("td");

            cell.innerHTML = historyTable[key[j]];
            row.appendChild(cell);
          }

          transactionTable.appendChild(row);
        }
      }

      inToTransactionTable(transactionOfAccount);

      var orderPrice = document.querySelectorAll(
        ".body-transaction tr td:nth-child(5)"
      );
      var fee = document.querySelectorAll(
        ".body-transaction tr td:nth-child(6)"
      );

      var quantityOfUSDT = document.querySelectorAll(
        ".body-transaction tr td:last-child"
      );

      function innerUSDT2() {
        for (i = 0; i <= orderPrice.length; i++) {
          orderPrice[i].textContent =
            parseFloat(transactionOfAccount[i].orderPrice).toLocaleString(
              "en-US",
              {
                maximumFractionDigits: "5",
              }
            ) + " USDT";
          quantityOfUSDT[i].textContent =
            parseFloat(transactionOfAccount[i].quantityOfUSDT).toLocaleString(
              "en-US",
              {
                maximumFractionDigits: "5",
              }
            ) + " USDT";
          fee[i].textContent =
            parseFloat(transactionOfAccount[i].fee).toLocaleString("en-US", {
              maximumFractionDigits: "5",
            }) + " USDT";
        }
      }

      innerUSDT2();
    </script>

    <script>
      var filterBar = document.querySelector(".filter-bar");
      function filterDisappear(event) {
        filterBar.setAttribute("class" , "disappear");
      }

      function filterAppear(event) {
        filterBar.setAttribute("class" , "d-flex justify-content-start align-items-center filter-bar appear");
      }
    </script>
  </body>
</html>
